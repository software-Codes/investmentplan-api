{
  "openapi": "3.0.0",
  "info": {
    "title": "Investment Plan API",
    "version": "1.0.0",
    "description": "Complete API documentation for investment platform with authentication, profile management, KYC verification, and admin operations",
    "contact": {
      "name": "API Support",
      "email": "support@investmentplan.com"
    }
  },
  "servers": [
    {
      "url": "http://localhost:3000",
      "description": "Development server"
    },
    {
      "url": "https://api.investmentplan.com",
      "description": "Production server"
    }
  ],
  "tags": [
    {
      "name": "Authentication",
      "description": "User authentication and registration"
    },
    {
      "name": "Profile",
      "description": "User profile management"
    },
    {
      "name": "Password Reset",
      "description": "Password reset operations"
    },
    {
      "name": "KYC",
      "description": "KYC document upload and verification"
    },
    {
      "name": "Admin",
      "description": "Admin user management operations"
    },
    {
      "name": "Deposits",
      "description": "USDT deposit operations - Submit transaction hash and check status"
    },
    {
      "name": "Wallet",
      "description": "User wallet operations - Transfer funds, view balances, and check locked funds"
    },
    {
      "name": "Admin Wallet",
      "description": "Admin wallet monitoring - View all users, transfers, locked funds, and platform statistics"
    }
  ],
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "Enter JWT token"
      },
      "adminAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "Enter admin JWT token"
      }
    },
    "schemas": {
      "SuccessResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string"
          },
          "data": {
            "type": "object"
          }
        }
      },
      "ErrorResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": false
          },
          "message": {
            "type": "string"
          }
        }
      },
      "User": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "fullName": {
            "type": "string"
          },
          "email": {
            "type": "string",
            "format": "email"
          },
          "phoneNumber": {
            "type": "string"
          },
          "profilePhoto": {
            "type": "string",
            "format": "uri"
          },
          "accountStatus": {
            "type": "string",
            "enum": ["pending", "active", "suspended", "deactivated"]
          },
          "emailVerified": {
            "type": "boolean"
          },
          "kycStatus": {
            "type": "string",
            "enum": ["pending", "submitted"]
          }
        }
      },
      "Wallet": {
        "type": "object",
        "properties": {
          "balance": {
            "type": "number",
            "format": "double"
          },
          "locked": {
            "type": "number",
            "format": "double"
          }
        }
      },
      "DepositInstructions": {
        "type": "object",
        "properties": {
          "depositAddress": {
            "type": "string",
            "example": "0x54af84786bc0386d44fe908b2946f7f50c0f513f"
          },
          "asset": {
            "type": "string",
            "example": "USDT"
          },
          "networks": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "example": ["ERC20"]
          },
          "minDeposit": {
            "type": "number",
            "example": 10
          },
          "minConfirmations": {
            "type": "number",
            "example": 12
          },
          "explorerUrl": {
            "type": "string",
            "example": "https://etherscan.io/tx/"
          },
          "steps": {
            "type": "array",
            "items": {
              "type": "object"
            }
          },
          "howToGetTxHash": {
            "type": "object"
          },
          "txHashFormat": {
            "type": "object"
          },
          "importantNotes": {
            "type": "array",
            "items": {
              "type": "object"
            }
          },
          "troubleshooting": {
            "type": "array",
            "items": {
              "type": "object"
            }
          },
          "security": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "support": {
            "type": "object"
          }
        }
      },
      "DepositSubmit": {
        "type": "object",
        "required": ["txId"],
        "properties": {
          "txId": {
            "type": "string",
            "description": "Ethereum transaction hash (0x + 64 hex characters)",
            "example": "0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef",
            "pattern": "^0x[a-fA-F0-9]{64}$"
          },
          "network": {
            "type": "string",
            "description": "Network type (default: ERC20)",
            "example": "ERC20",
            "enum": ["ERC20"]
          }
        }
      },
      "DepositResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "example": "Deposit verified and credited to your Account Wallet."
          },
          "data": {
            "type": "object",
            "properties": {
              "depositId": {
                "type": "string",
                "format": "uuid"
              },
              "status": {
                "type": "string",
                "enum": ["PENDING", "PROCESSING", "CONFIRMED", "FAILED"],
                "example": "CONFIRMED"
              },
              "message": {
                "type": "string"
              },
              "txId": {
                "type": "string"
              },
              "network": {
                "type": "string",
                "example": "ERC20"
              },
              "amountUsd": {
                "type": "number",
                "format": "double",
                "example": 100.50
              },
              "explorerUrl": {
                "type": "string",
                "example": "https://etherscan.io/tx/0x123..."
              },
              "nextAction": {
                "type": "string",
                "enum": ["none", "wait_for_verification"],
                "example": "none"
              }
            }
          }
        }
      },
      "DepositStatusResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "example": "Deposit verified and credited."
          },
          "data": {
            "type": "object",
            "properties": {
              "depositId": {
                "type": "string",
                "format": "uuid"
              },
              "status": {
                "type": "string",
                "enum": ["PENDING", "PROCESSING", "CONFIRMED", "FAILED"]
              },
              "txId": {
                "type": "string"
              },
              "amountUsd": {
                "type": "number",
                "format": "double",
                "nullable": true
              }
            }
          }
        }
      },
      "DepositError": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": false
          },
          "message": {
            "type": "string"
          },
          "code": {
            "type": "string",
            "enum": [
              "ERR_TXID_REQUIRED",
              "ERR_TXID_INVALID",
              "ERR_TXID_ALREADY_CLAIMED",
              "ERR_ADDRESS_MISMATCH",
              "ERR_PROVIDER_STATUS",
              "ERR_AMOUNT_OUT_OF_RANGE",
              "ERR_DEPOSIT_NOT_FOUND"
            ]
          }
        }
      }
    }
  },
  "paths": {
    "/api/v1/auth/register": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Register new user",
        "description": "Create a new user account and send email verification code",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["email", "password", "fullName"],
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "example": "user@example.com"
                  },
                  "password": {
                    "type": "string",
                    "format": "password",
                    "minLength": 8,
                    "example": "password123"
                  },
                  "fullName": {
                    "type": "string",
                    "example": "John Doe"
                  },
                  "phoneNumber": {
                    "type": "string",
                    "example": "+1234567890"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Account created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Account created successfully! Please check your email for verification code."
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "userId": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "email": {
                          "type": "string"
                        },
                        "nextStep": {
                          "type": "string",
                          "example": "verify_email"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/verify-email": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Verify email with OTP",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["userId", "otpCode"],
                "properties": {
                  "userId": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "otpCode": {
                    "type": "string",
                    "example": "123456"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Email verified successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/login": {
      "post": {
        "tags": ["Authentication"],
        "summary": "User login",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["email", "password"],
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email"
                  },
                  "password": {
                    "type": "string",
                    "format": "password"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login successful",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Login successful"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "accessToken": {
                          "type": "string"
                        },
                        "tokenType": {
                          "type": "string",
                          "example": "Bearer"
                        },
                        "expiresIn": {
                          "type": "integer",
                          "example": 604800
                        },
                        "user": {
                          "$ref": "#/components/schemas/User"
                        },
                        "wallets": {
                          "type": "object",
                          "properties": {
                            "account": {
                              "$ref": "#/components/schemas/Wallet"
                            },
                            "trading": {
                              "$ref": "#/components/schemas/Wallet"
                            },
                            "referral": {
                              "$ref": "#/components/schemas/Wallet"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Invalid credentials"
          },
          "403": {
            "description": "Account suspended or not verified"
          }
        }
      }
    },
    "/api/v1/auth/logout": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Logout user",
        "security": [{"bearerAuth": []}],
        "responses": {
          "200": {
            "description": "Logged out successfully"
          }
        }
      }
    },
    "/api/v1/auth/me": {
      "get": {
        "tags": ["Profile"],
        "summary": "Get current user profile",
        "security": [{"bearerAuth": []}],
        "responses": {
          "200": {
            "description": "User profile retrieved"
          }
        }
      }
    },
    "/api/v1/auth/profile": {
      "put": {
        "tags": ["Profile"],
        "summary": "Update user profile",
        "description": "Update name, phone, or profile photo (all fields optional)",
        "security": [{"bearerAuth": []}],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "fullName": {
                    "type": "string"
                  },
                  "phoneNumber": {
                    "type": "string"
                  },
                  "photo": {
                    "type": "string",
                    "format": "binary",
                    "description": "Profile photo (JPG/PNG, max 10MB)"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Profile updated successfully"
          }
        }
      }
    },
    "/api/v1/auth/account": {
      "delete": {
        "tags": ["Profile"],
        "summary": "Delete user account",
        "security": [{"bearerAuth": []}],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["password"],
                "properties": {
                  "password": {
                    "type": "string",
                    "format": "password"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Account deleted successfully"
          }
        }
      }
    },
    "/api/v1/admin/users": {
      "get": {
        "tags": ["Admin"],
        "summary": "List all users",
        "security": [{"adminAuth": []}],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "name": "size",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 50
            }
          },
          {
            "name": "status",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": ["pending", "active", "suspended", "deactivated"]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Users fetched successfully"
          }
        }
      }
    },
    "/api/v1/admin/users/{userId}/block": {
      "patch": {
        "tags": ["Admin"],
        "summary": "Block user",
        "security": [{"adminAuth": []}],
        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "User suspended successfully"
          }
        }
      }
    },
    "/api/v1/admin/users/{userId}/unblock": {
      "patch": {
        "tags": ["Admin"],
        "summary": "Unblock user",
        "security": [{"adminAuth": []}],
        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "User reactivated successfully"
          }
        }
      }
    },
    "/api/v1/deposit/instructions": {
      "get": {
        "tags": ["Deposits"],
        "summary": "Get deposit instructions",
        "description": "Retrieve comprehensive instructions for making USDT deposits including supported networks, minimum amounts, and step-by-step guides for different wallets/exchanges",
        "responses": {
          "200": {
            "description": "Deposit instructions retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/DepositInstructions"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "data": {
                    "depositAddress": "0x54af84786bc0386d44fe908b2946f7f50c0f513f",
                    "asset": "USDT",
                    "networks": ["ERC20"],
                    "minDeposit": 10,
                    "minConfirmations": 12,
                    "explorerUrl": "https://etherscan.io/tx/",
                    "steps": [
                      {
                        "title": "Choose Your Sending Method",
                        "description": "You can send from Binance, MetaMask, Trust Wallet, or any crypto exchange/wallet that supports USDT on Ethereum (ERC20)."
                      },
                      {
                        "title": "Send USDT to Our Address",
                        "description": "Send USDT on the Ethereum network (ERC20) to the address shown above. Minimum deposit: $10.",
                        "important": [
                          "Network MUST be Ethereum (ERC20) - NOT Tron (TRC20) or BSC (BEP20)",
                          "Use 'Send via Crypto Network' - NOT internal transfers or Binance Pay",
                          "Minimum amount: $10 USDT"
                        ]
                      }
                    ],
                    "txHashFormat": {
                      "description": "Valid transaction hash format",
                      "format": "0x followed by 64 hexadecimal characters",
                      "example": "0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef",
                      "length": 66
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/deposit/submit": {
      "post": {
        "tags": ["Deposits"],
        "summary": "Submit deposit transaction",
        "description": "Submit an Ethereum transaction hash for USDT deposit verification. The system will verify the transaction on Binance and credit your account wallet if valid.",
        "security": [{"bearerAuth": []}],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DepositSubmit"
              },
              "examples": {
                "validDeposit": {
                  "summary": "Valid deposit submission",
                  "value": {
                    "txId": "0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef",
                    "network": "ERC20"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Deposit confirmed and credited",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DepositResponse"
                },
                "example": {
                  "success": true,
                  "message": "Deposit verified and credited to your Account Wallet.",
                  "data": {
                    "depositId": "550e8400-e29b-41d4-a716-446655440000",
                    "status": "CONFIRMED",
                    "message": "Deposit verified and credited.",
                    "txId": "0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef",
                    "network": "ERC20",
                    "amountUsd": 100.50,
                    "explorerUrl": "https://etherscan.io/tx/0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef",
                    "nextAction": "none"
                  }
                }
              }
            }
          },
          "202": {
            "description": "Deposit submitted, awaiting verification",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DepositResponse"
                },
                "example": {
                  "success": true,
                  "message": "We found your deposit on Binance and are waiting for confirmations.",
                  "data": {
                    "depositId": "550e8400-e29b-41d4-a716-446655440000",
                    "status": "PROCESSING",
                    "message": "Deposit is being verified.",
                    "txId": "0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef",
                    "network": "ERC20",
                    "amountUsd": 0,
                    "explorerUrl": "https://etherscan.io/tx/0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef",
                    "nextAction": "wait_for_verification"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid request - bad txId format, wrong address, or amount out of range",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DepositError"
                },
                "examples": {
                  "invalidTxId": {
                    "summary": "Invalid transaction hash format",
                    "value": {
                      "success": false,
                      "message": "Invalid transaction hash format.",
                      "code": "ERR_TXID_INVALID"
                    }
                  },
                  "addressMismatch": {
                    "summary": "Wrong deposit address",
                    "value": {
                      "success": false,
                      "message": "Deposit was not sent to the configured address.",
                      "code": "ERR_ADDRESS_MISMATCH"
                    }
                  },
                  "amountOutOfRange": {
                    "summary": "Amount below minimum",
                    "value": {
                      "success": false,
                      "message": "Deposit amount is outside allowed limits.",
                      "code": "ERR_AMOUNT_OUT_OF_RANGE"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - missing or invalid JWT token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "409": {
            "description": "Transaction already claimed by another user",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DepositError"
                },
                "example": {
                  "success": false,
                  "message": "This transaction has already been claimed.",
                  "code": "ERR_TXID_ALREADY_CLAIMED"
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable - deposit not confirmed by provider",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DepositError"
                },
                "example": {
                  "success": false,
                  "message": "Unable to submit deposit. Please try again.",
                  "code": "ERR_PROVIDER_STATUS"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/deposit/status/{txId}": {
      "get": {
        "tags": ["Deposits"],
        "summary": "Check deposit status",
        "description": "Get the current status of a deposit by transaction hash. This endpoint re-verifies the transaction with Binance to provide the latest status.",
        "security": [{"bearerAuth": []}],
        "parameters": [
          {
            "name": "txId",
            "in": "path",
            "required": true,
            "description": "Ethereum transaction hash (0x + 64 hex characters)",
            "schema": {
              "type": "string",
              "pattern": "^0x[a-fA-F0-9]{64}$",
              "example": "0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Deposit status retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DepositStatusResponse"
                },
                "examples": {
                  "confirmed": {
                    "summary": "Confirmed deposit",
                    "value": {
                      "success": true,
                      "message": "Deposit verified and credited.",
                      "data": {
                        "depositId": "550e8400-e29b-41d4-a716-446655440000",
                        "status": "CONFIRMED",
                        "txId": "0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef",
                        "amountUsd": 100.50
                      }
                    }
                  },
                  "processing": {
                    "summary": "Processing deposit",
                    "value": {
                      "success": true,
                      "message": "On-chain transaction detected. Waiting for confirmations.",
                      "data": {
                        "depositId": "550e8400-e29b-41d4-a716-446655440000",
                        "status": "PROCESSING",
                        "txId": "0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef",
                        "amountUsd": null
                      }
                    }
                  },
                  "failed": {
                    "summary": "Failed deposit",
                    "value": {
                      "success": true,
                      "message": "Deposit failed verification. Check the tx hash and try again.",
                      "data": {
                        "depositId": "550e8400-e29b-41d4-a716-446655440000",
                        "status": "FAILED",
                        "txId": "0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef",
                        "amountUsd": null
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid txId parameter",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DepositError"
                },
                "example": {
                  "success": false,
                  "message": "txId is required",
                  "code": "ERR_TXID_REQUIRED"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - missing or invalid JWT token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Deposit not found - transaction not submitted yet",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DepositError"
                },
                "example": {
                  "success": false,
                  "message": "No deposit claim found for this txId. Submit it first.",
                  "code": "ERR_DEPOSIT_NOT_FOUND"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Could not fetch status. Try again later."
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/deposits/binance": {
      "get": {
        "tags": ["Admin"],
        "summary": "Get all Binance deposit transactions",
        "description": "Fetch all deposit transactions from Binance for the configured admin address. Shows both claimed and unclaimed deposits with enriched data from our database.",
        "security": [{"adminAuth": []}],
        "parameters": [
          {
            "name": "days",
            "in": "query",
            "description": "Number of days to look back (1-90, default fetches all)",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 90,
              "default": 90
            }
          },
          {
            "name": "coin",
            "in": "query",
            "description": "Cryptocurrency coin",
            "schema": {
              "type": "string",
              "default": "USDT"
            }
          },
          {
            "name": "network",
            "in": "query",
            "description": "Blockchain network",
            "schema": {
              "type": "string",
              "default": "ETH",
              "enum": ["ETH"]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Binance deposits retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Retrieved 15 deposits from Binance (last 90 days)"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "deposits": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "txId": {
                                "type": "string",
                                "example": "0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef"
                              },
                              "amount": {
                                "type": "number",
                                "example": 100.50
                              },
                              "coin": {
                                "type": "string",
                                "example": "USDT"
                              },
                              "network": {
                                "type": "string",
                                "example": "ETH"
                              },
                              "address": {
                                "type": "string",
                                "example": "0x54af84786bc0386d44fe908b2946f7f50c0f513f"
                              },
                              "status": {
                                "type": "string",
                                "enum": ["SUCCESS", "PENDING", "CREDITED"],
                                "example": "SUCCESS"
                              },
                              "insertTime": {
                                "type": "number",
                                "description": "Unix timestamp in milliseconds",
                                "example": 1699564800000
                              },
                              "claimed": {
                                "type": "boolean",
                                "description": "Whether this deposit has been claimed by a user",
                                "example": true
                              },
                              "claimedBy": {
                                "type": "string",
                                "format": "uuid",
                                "nullable": true,
                                "description": "User ID who claimed this deposit"
                              },
                              "ourStatus": {
                                "type": "string",
                                "enum": ["PENDING", "PROCESSING", "CONFIRMED", "FAILED"],
                                "nullable": true,
                                "description": "Status in our database"
                              },
                              "explorerUrl": {
                                "type": "string",
                                "example": "https://etherscan.io/tx/0x123..."
                              }
                            }
                          }
                        },
                        "summary": {
                          "type": "object",
                          "properties": {
                            "total": {
                              "type": "integer",
                              "example": 15
                            },
                            "claimed": {
                              "type": "integer",
                              "example": 12
                            },
                            "unclaimed": {
                              "type": "integer",
                              "example": 3
                            },
                            "totalAmount": {
                              "type": "string",
                              "example": "1523.45"
                            }
                          }
                        },
                        "filters": {
                          "type": "object",
                          "properties": {
                            "days": {
                              "type": "integer"
                            },
                            "coin": {
                              "type": "string"
                            },
                            "network": {
                              "type": "string"
                            }
                          }
                        }
                      }
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "Retrieved 15 deposits from Binance (last 90 days)",
                  "data": {
                    "deposits": [
                      {
                        "txId": "0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef",
                        "amount": 100.50,
                        "coin": "USDT",
                        "network": "ETH",
                        "address": "0x54af84786bc0386d44fe908b2946f7f50c0f513f",
                        "status": "SUCCESS",
                        "insertTime": 1699564800000,
                        "claimed": true,
                        "claimedBy": "f1b210a3-16e4-42a1-8042-779e9a582470",
                        "ourStatus": "CONFIRMED",
                        "explorerUrl": "https://etherscan.io/tx/0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef"
                      },
                      {
                        "txId": "0xabcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890",
                        "amount": 50.00,
                        "coin": "USDT",
                        "network": "ETH",
                        "address": "0x54af84786bc0386d44fe908b2946f7f50c0f513f",
                        "status": "SUCCESS",
                        "insertTime": 1699478400000,
                        "claimed": false,
                        "claimedBy": null,
                        "ourStatus": null,
                        "explorerUrl": "https://etherscan.io/tx/0xabcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890"
                      }
                    ],
                    "summary": {
                      "total": 15,
                      "claimed": 12,
                      "unclaimed": 3,
                      "totalAmount": "1523.45"
                    },
                    "filters": {
                      "days": 90,
                      "coin": "USDT",
                      "network": "ETH"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid parameters",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Days must be between 1 and 90"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - missing or invalid admin token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Failed to fetch Binance deposits"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/wallet/transfer": {
      "post": {
        "tags": ["Wallet"],
        "summary": "Transfer funds between wallets",
        "description": "Transfer funds from Account to Trading wallet, Trading to Account wallet, or Referral to Account wallet. Principal transfers are locked for 30 days.",
        "security": [{"bearerAuth": []}],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["fromWallet", "toWallet", "amount"],
                "properties": {
                  "fromWallet": {
                    "type": "string",
                    "enum": ["account", "trading", "referral"],
                    "example": "account"
                  },
                  "toWallet": {
                    "type": "string",
                    "enum": ["account", "trading", "referral"],
                    "example": "trading"
                  },
                  "amount": {
                    "type": "number",
                    "minimum": 0.01,
                    "example": 100.50
                  },
                  "transferType": {
                    "type": "string",
                    "enum": ["principal", "profit"],
                    "description": "Type of transfer - principal locked for 30 days, profit for 7 days",
                    "example": "principal"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Transfer successful",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": "Transfer completed successfully",
                  "data": {
                    "transferId": "550e8400-e29b-41d4-a716-446655440000",
                    "fromWallet": "account",
                    "toWallet": "trading",
                    "amount": 100.50,
                    "transferType": "principal",
                    "lockedUntil": "2024-02-15T10:30:00.000Z",
                    "status": "active"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid transfer request"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/v1/wallet/balances": {
      "get": {
        "tags": ["Wallet"],
        "summary": "Get all wallet balances",
        "description": "Retrieve balances for all three wallets (account, trading, referral) with locked amounts",
        "security": [{"bearerAuth": []}],
        "responses": {
          "200": {
            "description": "Balances retrieved successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "data": {
                    "account": {
                      "balance": 1500.75,
                      "locked": 500.00
                    },
                    "trading": {
                      "balance": 2300.50,
                      "locked": 1000.00
                    },
                    "referral": {
                      "balance": 150.25,
                      "locked": 0
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/v1/wallet/transfers": {
      "get": {
        "tags": ["Wallet"],
        "summary": "Get transfer history",
        "description": "Retrieve paginated transfer history with filtering options",
        "security": [{"bearerAuth": []}],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 20,
              "maximum": 100
            }
          },
          {
            "name": "fromWallet",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": ["account", "trading", "referral"]
            }
          },
          {
            "name": "toWallet",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": ["account", "trading", "referral"]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Transfer history retrieved",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "data": {
                    "transfers": [
                      {
                        "id": "550e8400-e29b-41d4-a716-446655440000",
                        "fromWallet": "account",
                        "toWallet": "trading",
                        "amount": 100.50,
                        "transferType": "principal",
                        "status": "active",
                        "lockedUntil": "2024-02-15T10:30:00.000Z",
                        "createdAt": "2024-01-16T10:30:00.000Z"
                      }
                    ],
                    "pagination": {
                      "page": 1,
                      "limit": 20,
                      "total": 45,
                      "pages": 3
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/v1/wallet/transactions": {
      "get": {
        "tags": ["Wallet"],
        "summary": "Get transaction history",
        "description": "Retrieve paginated transaction history (debits and credits) with filtering",
        "security": [{"bearerAuth": []}],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 20,
              "maximum": 100
            }
          },
          {
            "name": "walletType",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": ["account", "trading", "referral"]
            }
          },
          {
            "name": "transactionType",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": ["debit", "credit"]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Transaction history retrieved",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "data": {
                    "transactions": [
                      {
                        "id": "550e8400-e29b-41d4-a716-446655440000",
                        "walletType": "account",
                        "transactionType": "credit",
                        "amount": 100.50,
                        "balanceAfter": 1500.75,
                        "description": "Deposit confirmed",
                        "createdAt": "2024-01-16T10:30:00.000Z"
                      }
                    ],
                    "pagination": {
                      "page": 1,
                      "limit": 20,
                      "total": 120,
                      "pages": 6
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/v1/wallet/locked": {
      "get": {
        "tags": ["Wallet"],
        "summary": "View locked funds",
        "description": "Get all locked funds with unlock dates and days remaining",
        "security": [{"bearerAuth": []}],
        "responses": {
          "200": {
            "description": "Locked funds retrieved",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "data": {
                    "lockedFunds": [
                      {
                        "id": "550e8400-e29b-41d4-a716-446655440000",
                        "fromWallet": "account",
                        "toWallet": "trading",
                        "amount": 100.50,
                        "transferType": "principal",
                        "lockedUntil": "2024-02-15T10:30:00.000Z",
                        "daysRemaining": 25,
                        "createdAt": "2024-01-16T10:30:00.000Z"
                      }
                    ],
                    "summary": {
                      "totalLocked": 1500.00,
                      "principalLocked": 1000.00,
                      "profitLocked": 500.00
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/v1/admin/wallet/users": {
      "get": {
        "tags": ["Admin Wallet"],
        "summary": "List all users with wallet balances",
        "description": "Get paginated list of all users with their wallet balances and locked amounts",
        "security": [{"adminAuth": []}],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 50,
              "maximum": 100
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Users retrieved successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "data": {
                    "users": [
                      {
                        "userId": "f1b210a3-16e4-42a1-8042-779e9a582470",
                        "fullName": "John Doe",
                        "email": "john@example.com",
                        "wallets": {
                          "account": {
                            "balance": 1500.75,
                            "locked": 500.00
                          },
                          "trading": {
                            "balance": 2300.50,
                            "locked": 1000.00
                          },
                          "referral": {
                            "balance": 150.25,
                            "locked": 0
                          }
                        },
                        "totalBalance": 3951.50,
                        "totalLocked": 1500.00
                      }
                    ],
                    "pagination": {
                      "page": 1,
                      "limit": 50,
                      "total": 250,
                      "pages": 5
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - admin token required"
          }
        }
      }
    },
    "/api/v1/admin/wallet/users/{userId}": {
      "get": {
        "tags": ["Admin Wallet"],
        "summary": "Get specific user wallet details",
        "description": "Get detailed wallet information for a specific user including balances, locked funds, and recent transactions",
        "security": [{"adminAuth": []}],
        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "User wallet details retrieved",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "data": {
                    "user": {
                      "userId": "f1b210a3-16e4-42a1-8042-779e9a582470",
                      "fullName": "John Doe",
                      "email": "john@example.com"
                    },
                    "wallets": {
                      "account": {
                        "balance": 1500.75,
                        "locked": 500.00
                      },
                      "trading": {
                        "balance": 2300.50,
                        "locked": 1000.00
                      },
                      "referral": {
                        "balance": 150.25,
                        "locked": 0
                      }
                    },
                    "lockedFunds": [
                      {
                        "id": "550e8400-e29b-41d4-a716-446655440000",
                        "amount": 100.50,
                        "transferType": "principal",
                        "lockedUntil": "2024-02-15T10:30:00.000Z",
                        "daysRemaining": 25
                      }
                    ],
                    "recentTransactions": [
                      {
                        "id": "550e8400-e29b-41d4-a716-446655440000",
                        "walletType": "account",
                        "transactionType": "credit",
                        "amount": 100.50,
                        "createdAt": "2024-01-16T10:30:00.000Z"
                      }
                    ]
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - admin token required"
          },
          "404": {
            "description": "User not found"
          }
        }
      }
    },
    "/api/v1/admin/wallet/transfers": {
      "get": {
        "tags": ["Admin Wallet"],
        "summary": "Get all transfers across platform",
        "description": "Retrieve all wallet transfers with filtering and pagination",
        "security": [{"adminAuth": []}],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 50,
              "maximum": 100
            }
          },
          {
            "name": "userId",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "status",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": ["active", "unlocked", "cancelled"]
            }
          },
          {
            "name": "transferType",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": ["principal", "profit"]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Transfers retrieved successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "data": {
                    "transfers": [
                      {
                        "id": "550e8400-e29b-41d4-a716-446655440000",
                        "userId": "f1b210a3-16e4-42a1-8042-779e9a582470",
                        "userName": "John Doe",
                        "userEmail": "john@example.com",
                        "fromWallet": "account",
                        "toWallet": "trading",
                        "amount": 100.50,
                        "transferType": "principal",
                        "status": "active",
                        "lockedUntil": "2024-02-15T10:30:00.000Z",
                        "createdAt": "2024-01-16T10:30:00.000Z"
                      }
                    ],
                    "pagination": {
                      "page": 1,
                      "limit": 50,
                      "total": 1250,
                      "pages": 25
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - admin token required"
          }
        }
      }
    },
    "/api/v1/admin/wallet/locked": {
      "get": {
        "tags": ["Admin Wallet"],
        "summary": "Get all locked funds across platform",
        "description": "View all locked funds with user details and unlock dates",
        "security": [{"adminAuth": []}],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 50,
              "maximum": 100
            }
          },
          {
            "name": "transferType",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": ["principal", "profit"]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Locked funds retrieved",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "data": {
                    "lockedFunds": [
                      {
                        "id": "550e8400-e29b-41d4-a716-446655440000",
                        "userId": "f1b210a3-16e4-42a1-8042-779e9a582470",
                        "userName": "John Doe",
                        "userEmail": "john@example.com",
                        "fromWallet": "account",
                        "toWallet": "trading",
                        "amount": 100.50,
                        "transferType": "principal",
                        "lockedUntil": "2024-02-15T10:30:00.000Z",
                        "daysRemaining": 25,
                        "createdAt": "2024-01-16T10:30:00.000Z"
                      }
                    ],
                    "summary": {
                      "totalLocked": 125000.00,
                      "principalLocked": 100000.00,
                      "profitLocked": 25000.00,
                      "affectedUsers": 150
                    },
                    "pagination": {
                      "page": 1,
                      "limit": 50,
                      "total": 450,
                      "pages": 9
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - admin token required"
          }
        }
      }
    },
    "/api/v1/admin/wallet/stats": {
      "get": {
        "tags": ["Admin Wallet"],
        "summary": "Get platform-wide wallet statistics",
        "description": "Retrieve comprehensive statistics about all wallets, transfers, and locked funds across the platform",
        "security": [{"adminAuth": []}],
        "responses": {
          "200": {
            "description": "Statistics retrieved successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "data": {
                    "totalBalances": {
                      "account": 150000.50,
                      "trading": 250000.75,
                      "referral": 25000.25,
                      "total": 425001.50
                    },
                    "totalLocked": {
                      "account": 50000.00,
                      "trading": 75000.00,
                      "referral": 0,
                      "total": 125000.00
                    },
                    "transfers": {
                      "total": 1250,
                      "last24h": 45,
                      "last7days": 320,
                      "last30days": 1100
                    },
                    "lockedFunds": {
                      "principal": 100000.00,
                      "profit": 25000.00,
                      "total": 125000.00,
                      "affectedUsers": 150
                    },
                    "users": {
                      "total": 250,
                      "withBalance": 230,
                      "withLockedFunds": 150
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - admin token required"
          }
        }
      }
    }
  }
}
